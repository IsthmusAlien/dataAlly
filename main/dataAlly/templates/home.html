{% extends "base.html" %}
{% load static %}
{% block title %}Home{% endblock title %}

{% block body %}
<main>
    <div class="main_con">
        <div class="particle_con">
            <canvas id="canvas1"></canvas>
        </div>
    </div>
    <div class="text_con">
        <span id="element"></span>
        <a class="f_btn" href="/database">Let's Explore</a>
    </div>
    <a class="arr_a" href="#datasets_con">
        <div class="arrow_con">
            <i class="fi fi-rr-angle-down arr1"></i>
            <i class="fi fi-rr-angle-down arr2"></i>
        </div>
    </a>

    <div class="count_con">
        <div class="datasets_count">
            <img class="count_img" src="{% static 'img/dataset.gif' %}" alt="img1">
            <h2>230K</h2>
            <h2>Total DataSets</h2>
        </div>

        <div class="models_count count">
            <img class="count_img" src="{% static 'img/model.gif' %}" alt="img2">
            <h2>230K</h2>
            <h2>Total Models</h2>
        </div>

        <div class="dataliens_count count">
            <img class="count_img" src="{% static 'img/people.gif' %}" alt="img3">
            <h2>230K</h2>
            <h2>Total dataliens</h2>
        </div>
    </div>

    <div id="datasets_con" class="databases_con">
        <div class="databases_info">
            <h2><i class="fi fi-rs-file-spreadsheet"></i> Top DataSets</h2>
        </div>

        <div class="top_datasets">
            {% for db in databases %}
            <div class="card">
                <img class="card_img" src="/media/{{ db.db_image }}" alt="dimg">
                <h3>{{ db.db_name }}</h3>
                <p>{{ db.db_info }}</p>
                <p>Date: {{ db.db_upload_date }}</p>
                <h4>Rating: {{ db.db_rating }} ‚≠êÔ∏è</h4>
                <a href="#">visit</a>
            </div>
            {% endfor %}
            
        </div>
    </div>

    <div class="databases_con">
        <div class="databases_info">
            <h2><i class="fi fi-ss-chart-scatter"></i> Top Models</h2>
        </div>

        <div class="top_datasets">
            {% for md in models %}
            <div class="card">
                <img class="card_img" src="/media/{{ md.md_image }}" alt="dimg">
                <h3>{{ md.md_name }}</h3>
                <p>{{ md.md_info }}</p>
                <p>Date: {{ md.md_upload_date }}</p>
                <h4>Rating: {{ md.md_rating }} ‚≠êÔ∏è</h4>
                <a href="#">visit</a>
            </div>
            {% endfor %}
        </div>
    </div>

    <div class="databases_con">
        <div class="top_datasets top_datasets2">
            <div class="card2">
                <img class="profile_img" src="https://i.pinimg.com/474x/f9/df/98/f9df98f937630aa415ee71fceb00a4a1.jpg" alt="dimg">
                <h3>Nora Fatai</h3>
                <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Modi, voluptate.</p>
                <h4>Rating: ‚≠êÔ∏è</h4>
            </div>
            <div class="card2">
                <img class="profile_img" src="https://i.pinimg.com/474x/f9/df/98/f9df98f937630aa415ee71fceb00a4a1.jpg" alt="dimg">
                <h3>Nora Fatai</h3>
                <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Modi, voluptate.</p>
                <h4>Rating: ‚≠êÔ∏è</h4>
            </div>
            <div class="card2">
                <img class="profile_img" src="https://i.pinimg.com/474x/f9/df/98/f9df98f937630aa415ee71fceb00a4a1.jpg" alt="dimg">
                <h3>Nora Fatai</h3>
                <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Modi, voluptate.</p>
                <h4>Rating: ‚≠êÔ∏è</h4>
            </div>
            <div class="card2">
                <img class="profile_img" src="https://i.pinimg.com/474x/f9/df/98/f9df98f937630aa415ee71fceb00a4a1.jpg" alt="dimg">
                <h3>Nora Fatai</h3>
                <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Modi, voluptate.</p>
                <h4>Rating: ‚≠êÔ∏è</h4>
            </div>
            <div class="card2">
                <img class="profile_img" src="https://i.pinimg.com/474x/f9/df/98/f9df98f937630aa415ee71fceb00a4a1.jpg" alt="dimg">
                <h3>Nora Fatai</h3>
                <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Modi, voluptate.</p>
                <h4>Rating: ‚≠êÔ∏è</h4>
            </div>
        </div>
    </div>

</main>
{% endblock body %}

{% block extra_scripts %}


<script src="https://unpkg.com/typed.js@2.1.0/dist/typed.umd.js"></script>

<script>
    let typed = new Typed('#element', {
        strings: ["Empowering Tomorrow's Insights Today: Where Data üìä Meets Machine Learning", "Data-driven Discoveries, Powered by AI ü§ñ.", "Machine Learning: Shaping the Future, One Model at a Time."],
        typeSpeed: 50,
        showCursor: false,
        loop: true
    });
</script>

<script>
    const canvas = document.getElementById("canvas1");
const ctx = canvas.getContext("2d");
canvas.width  = window.innerWidth;
canvas.height = 300;
let particleArray = [];

let mouse = {
	x: null,
	y: null,
    radius: 80
}
window.addEventListener('mousemove', 
	function(event){
		mouse.x = event.x + canvas.clientLeft/2;
		mouse.y = event.y-50 + canvas.clientTop/2;
});

function drawImage(){
    let imageWidth = png.width || png.naturalWidth;
    let imageHeight = png.height || png.naturalHeight;
    const data = ctx.getImageData(0, 0, imageWidth, imageHeight);
    ctx.clearRect(0,0,canvas.width, canvas.height);
    class Particle {
        constructor(x, y, color, size){
            this.x = x + canvas.width/2-png.width*2,
            this.y = y + canvas.height/2-png.height*2,
            this.color = color,
            this.size = 2,
            this.baseX = x + canvas.width/2-png.width*2,
            this.baseY = y + canvas.height/2-png.height*2,
            this.density = ((Math.random() * 10) + 2);
        }
        draw() {
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
            ctx.closePath();
            ctx.fill();
        }
        update() {
            ctx.fillStyle = this.color;
            let dx = mouse.x - this.x;
            let dy = mouse.y - this.y;
            let distance = Math.sqrt(dx*dx + dy*dy);
            let forceDirectionX = dx / distance;
            let forceDirectionY = dy / distance;
            var maxDistance = 80;
            var force = (maxDistance - distance) / maxDistance;

            if (force < 0) force = 0;

            let directionX = (forceDirectionX * force * this.density) * 0.9;
            let directionY = (forceDirectionY * force * this.density) * 0.9;

            if (distance < mouse.radius + this.size){
                this.x -= directionX;
                this.y -= directionY;
            } else {
                if (this.x !== this.baseX ) {
                    let dx = this.x - this.baseX;
                    let dy = this.y - this.baseY;
                    this.x -= dx/5;
                } if (this.y !== this.baseY) {
                    let dx = this.x - this.baseX;
                    let dy = this.y - this.baseY;
                    this.y -= dy/5;
                }
            }
            this.draw();
        }
    }
    function init(){
        particleArray = [];

        for (var y = 0, y2 = data.height; y < y2; y++) {
            for (var x = 0, x2 = data.width; x < x2; x++) {
                if (data.data[(y * 4 * data.width) + (x * 4) + 3] > 128) {
                    let positionX = x;
                    let positionY = y;
                    let color = "rgb("+data.data[(y * 4 * data.width)+ (x * 4)]+","+data.data[(y * 4 * data.width)+ (x * 4) +1]+","+data.data[(y * 4 * data.width)+ (x * 4) +2]+")";

                    particleArray.push(new Particle(positionX*4, positionY*4, color));

                }
            }
        }
    }
    function animate(){
        requestAnimationFrame(animate);
        ctx.fillStyle = '#1b1e22';
        ctx.fillRect(0,0,innerWidth,innerHeight);
	    for(let i = 0; i < particleArray.length; i++){
            particleArray[i].update();
	    }
    }
    init();
    animate();

    // RESIZE SETTING - empty and refill particle array every time window changes size + change canvas size
    window.addEventListener('resize',
	function(){
		canvas.width = innerWidth;
		canvas.height = innerHeight;
		init();
	});
}


var png = new Image();
png.src = "data:image/png;base64,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";

window.addEventListener('load', (event) => {
    console.log('page has loaded');
    ctx.drawImage(png, 0, 0);
    drawImage();
});
</script>

{% endblock %}

